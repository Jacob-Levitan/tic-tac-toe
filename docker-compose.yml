services:
  tic-tac-toe:
    image: "zcohn93/tic-tac-toe:0.5"
    container_name: tic-tac-toe
    ports:
      - 4001:4001
    environment:
      - PORT=4001
      - DB_URI=tic-tac-toe.blziyjp.mongodb.net/tic-tac-toe
    secrets:
      - db_user
      - db_pw
      - session_secret
    tty: true
    stdin_open: true
    volumes:
      - ./secrets/.netrc:/root/.netrc:ro

secrets:
  github_token:
    file: secrets/.netrc
  db_user:
    file: secrets/db_user
  db_pw:
    file: secrets/db_pw
  session_secret:
    file: secrets/session_secret
